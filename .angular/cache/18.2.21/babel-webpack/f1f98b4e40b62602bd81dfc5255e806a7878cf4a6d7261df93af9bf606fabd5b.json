{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HP/Documents/Desarrollo de frontend 2/mi-marcador-landing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { NgIf, NgFor, DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nfunction DemoComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function DemoComponent_button_7_Template_button_click_0_listener() {\n      const league_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeLeague(league_r2.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const league_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", league_r2.id === ctx_r2.selectedLeagueId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", league_r2.name, \" \");\n  }\n}\nfunction DemoComponent_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1, \"Cargando partidos...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoComponent_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.errorMsg);\n  }\n}\nfunction DemoComponent_div_10_article_1_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 21);\n  }\n  if (rf & 2) {\n    const m_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", m_r4.strHomeTeamBadge, i0.ɵɵsanitizeUrl)(\"alt\", m_r4.strHomeTeam);\n  }\n}\nfunction DemoComponent_div_10_article_1_img_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 21);\n  }\n  if (rf & 2) {\n    const m_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", m_r4.strAwayTeamBadge, i0.ɵɵsanitizeUrl)(\"alt\", m_r4.strAwayTeam);\n  }\n}\nfunction DemoComponent_div_10_article_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"article\", 13)(1, \"div\", 14)(2, \"div\", 15);\n    i0.ɵɵtemplate(3, DemoComponent_div_10_article_1_img_3_Template, 1, 2, \"img\", 16);\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 17)(7, \"span\", 18);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 19);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 15);\n    i0.ɵɵtemplate(13, DemoComponent_div_10_article_1_img_13_Template, 1, 2, \"img\", 16);\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"p\", 20);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const m_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", m_r4.strHomeTeamBadge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r4.strHomeTeam);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 8, m_r4.dateEvent, \"dd/MM\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(m_r4.strTime);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", m_r4.strAwayTeamBadge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r4.strAwayTeam);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", m_r4.strLeague, \" \\u00B7 \", m_r4.strEvent, \" \");\n  }\n}\nfunction DemoComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtemplate(1, DemoComponent_div_10_article_1_Template, 18, 11, \"article\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.matches);\n  }\n}\nexport let DemoComponent = /*#__PURE__*/(() => {\n  class DemoComponent {\n    constructor() {\n      this.isLoading = false;\n      this.errorMsg = '';\n      this.matches = [];\n      // Liga seleccionada (id de TheSportsDB)\n      this.selectedLeagueId = '4328'; // Premier League por defecto\n      // Mapa de ligas para los botones\n      this.leagues = [{\n        id: '4328',\n        name: 'Premier League'\n      }, {\n        id: '4335',\n        name: 'LaLiga'\n      }, {\n        id: '4331',\n        name: 'Bundesliga'\n      }, {\n        id: '4350',\n        name: 'Liga MX'\n      }, {\n        id: '4346',\n        name: 'MLS'\n      }];\n      // Configuración de la API de TheSportsDB\n      this.apiKey = '523114';\n      this.baseUrl = 'https://www.thesportsdb.com/api/v1/json';\n    }\n    ngOnInit() {\n      this.loadMatches();\n    }\n    loadMatches() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.isLoading = true;\n        _this.errorMsg = '';\n        _this.matches = [];\n        const url = `${_this.baseUrl}/${_this.apiKey}/eventsnextleague.php?id=${_this.selectedLeagueId}`;\n        console.log('Llamando a:', url);\n        try {\n          const response = yield fetch(url);\n          console.log('HTTP status:', response.status);\n          const rawText = yield response.text();\n          console.log('Respuesta cruda de la API:', rawText);\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          const data = JSON.parse(rawText);\n          const rawEvents = data?.events ?? [];\n          // Convertimos cada evento a horario de México\n          _this.matches = rawEvents.map(e => {\n            const event = e;\n            const {\n              date,\n              time\n            } = _this.toMexicoDateTime(e.dateEvent, e.strTime);\n            event.localDate = date;\n            event.localTime = time;\n            return event;\n          });\n          if (!_this.matches.length) {\n            _this.errorMsg = 'No hay partidos próximos para esta liga.';\n          }\n        } catch (err) {\n          console.error('Error al obtener datos de TheSportsDB', err);\n          _this.errorMsg = `Ocurrió un error al cargar los partidos. ${err?.message ?? ''}`;\n        } finally {\n          _this.isLoading = false;\n        }\n      })();\n    }\n    changeLeague(leagueId) {\n      this.selectedLeagueId = leagueId;\n      this.loadMatches();\n    }\n    // Convierte dateEvent + strTime a horario de Ciudad de México\n    toMexicoDateTime(dateStr, timeStr) {\n      if (!dateStr) {\n        return {\n          date: '',\n          time: ''\n        };\n      }\n      // Si no hay hora, asumimos 00:00:00\n      const safeTime = timeStr || '00:00:00';\n      // Construimos fecha/hora asumiendo que la API está en UTC\n      const iso = `${dateStr}T${safeTime}Z`;\n      const utcDate = new Date(iso);\n      const dateFormatter = new Intl.DateTimeFormat('es-MX', {\n        timeZone: 'America/Mexico_City',\n        day: '2-digit',\n        month: '2-digit'\n      });\n      const timeFormatter = new Intl.DateTimeFormat('es-MX', {\n        timeZone: 'America/Mexico_City',\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false\n      });\n      const date = dateFormatter.format(utcDate); // ej. 13/12\n      const time = timeFormatter.format(utcDate); // ej. 20:00\n      return {\n        date,\n        time\n      };\n    }\n    static {\n      this.ɵfac = function DemoComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DemoComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DemoComponent,\n        selectors: [[\"app-demo\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 11,\n        vars: 4,\n        consts: [[\"id\", \"demo\", 1, \"demo-section\"], [1, \"container\"], [1, \"section-subtitle\"], [1, \"league-buttons\"], [3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"status\", 4, \"ngIf\"], [\"class\", \"status error\", 4, \"ngIf\"], [\"class\", \"matches-grid\", 4, \"ngIf\"], [3, \"click\"], [1, \"status\"], [1, \"status\", \"error\"], [1, \"matches-grid\"], [\"class\", \"match-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"match-card\"], [1, \"teams\"], [1, \"team\"], [\"class\", \"team-logo\", 3, \"src\", \"alt\", 4, \"ngIf\"], [1, \"vs\"], [1, \"date\"], [1, \"time\"], [1, \"meta\"], [1, \"team-logo\", 3, \"src\", \"alt\"]],\n        template: function DemoComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"Pr\\u00F3ximos partidos por liga\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 2);\n            i0.ɵɵtext(5, \" Datos reales obtenidos desde la API de TheSportsDB usando tu API Key. \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 3);\n            i0.ɵɵtemplate(7, DemoComponent_button_7_Template, 2, 3, \"button\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(8, DemoComponent_p_8_Template, 2, 0, \"p\", 5)(9, DemoComponent_p_9_Template, 2, 1, \"p\", 6)(10, DemoComponent_div_10_Template, 2, 1, \"div\", 7);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.leagues);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.errorMsg);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.errorMsg);\n          }\n        },\n        dependencies: [NgIf, NgFor, DatePipe],\n        styles: [\".demo-section[_ngcontent-%COMP%]{padding:4rem 1.5rem;background:#020617;color:#f9fafb}.container[_ngcontent-%COMP%]{max-width:1120px;margin:0 auto}.section-subtitle[_ngcontent-%COMP%]{margin-top:.5rem;color:#9ca3af}.league-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;margin:1.5rem 0 2rem}.league-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border-radius:999px;border:none;cursor:pointer;font-weight:600;background:#22c55e;color:#020617;transition:transform .15s ease,box-shadow .15s ease}.league-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #22c55e59}.matches-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1.5rem}.match-card[_ngcontent-%COMP%]{background:#0b1120;border-radius:1rem;padding:1rem 1.25rem;display:flex;flex-direction:column;gap:.75rem}.teams[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.team[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.team[_ngcontent-%COMP%]   .team-logo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:999px;object-fit:contain;background:#020617}.team[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain}.team[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.score[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.meta[_ngcontent-%COMP%]{font-size:.85rem;color:#9ca3af}.status[_ngcontent-%COMP%]{margin-top:1rem;color:#e5e7eb}.status.error[_ngcontent-%COMP%]{color:#f97373}@media (max-width: 1024px){.matches-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 640px){.demo-section[_ngcontent-%COMP%]{padding:3rem 1rem}.matches-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.league-buttons[_ngcontent-%COMP%]{justify-content:flex-start}}\"]\n      });\n    }\n  }\n  return DemoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}